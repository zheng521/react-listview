!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.ReactListView=t(require("React")):e.ReactListView=t(e.React)}(this,function(e){return function(e){function t(o){if(r[o])return r[o].exports;var s=r[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function o(){}function s(e,t,r){t=t||e.parentNode;var o=t.scrollTop,s=t.offsetHeight,a=o+s,i=e.offsetTop,n=i+e.offsetHeight;return o>i||n>a?(e.scrollIntoView(r),!0):!1}var a=r(2),i=r(4),n=r(6),l=a.createFactory(n),c=r(5),d=a.createFactory(c),u=r(1),p=a.PropTypes.oneOfType([a.PropTypes.number,a.PropTypes.string]);e.exports=a.createClass({displayName:"ReactListView",propTypes:{renderText:a.PropTypes.func,title:p,rowHeight:p,rowStyle:a.PropTypes.object,data:a.PropTypes.array,loading:a.PropTypes.bool,emptyText:a.PropTypes.string,loadingText:a.PropTypes.string,idProperty:a.PropTypes.string,displayProperty:a.PropTypes.string,selected:a.PropTypes.object,sortable:a.PropTypes.bool,sortDirection:p,toggleSort:a.PropTypes.func},scrollToRow:function(e){return e?s.call(this,e,this.refs.listWrap.getDOMNode()):void 0},scrollToRowById:function(e){this.scrollToRow(this.findRowById(e))},scrollToRowByIndex:function(e){this.scrollToRow(this.findRowByIndex(e))},findRowByIndex:function(e){var t=this.props.data[e];if(t){var r=t[this.props.idProperty];return this.findRowById(r)}},findRowById:function(e){return this.isMounted()?this.getDOMNode().querySelector('[data-row-id="'+e+'"]'):void 0},getDefaultProps:function(){return{rowBoundMethods:{onRowMouseDown:"onMouseDown",onRowMouseUp:"onMouseUp",onRowClick:"onClick",onRowMouseOver:"onMouseOver",onRowMouseOut:"onMouseOut"},sortable:!0,selectRowOnClick:!0,idProperty:"id",displayProperty:"text",emptyText:"No records",loadingText:"",rowHeight:null,defaultStyle:{},defaultListStyle:{}}},getInitialState:function(){return{}},render:function(){var e=this.state,t=this.prepareProps(this.props),r=this.renderTitle(t,e),o=this.renderBody(t,e);return t.data=null,t.scrollToIndex&&setTimeout(function(){this.scrollToRow(t.scrollToIndex)}.bind(this),0),a.createElement("div",a.__spread({},t),r,o)},prepareProps:function(e){var t=u({},e);return t.style=this.prepareStyle(t),t.titleStyle=this.prepareTitleStyle(t),t.bodyStyle=this.prepareBodyStyle(t),t.listWrapStyle=this.prepareListWrapStyle(t),t.rowStyle=this.prepareRowStyle(t),t.className=this.prepareClassName(t),t},prepareStyle:function(e){var t={};return u(t,e.defaultStyle,e.style),t},prepareClassName:function(e){var t=e.className||"";t+=" z-listview",this.getCount(e)||(t+=" z-empty");var r=e.sortable?" z-sortable":"";return e.sortable&&e.sortDirection&&(r+="asc"===e.sortDirection||1===e.sortDirection?" z-asc":"desc"===e.sortDirection||-1===e.sortDirection?" z-desc":""),t+=r},prepareBodyStyle:function(e){var t=u({},e.defaultBodyStyle,e.bodyStyle);return t},prepareTitleStyle:function(e){var t=u({},e.defaultTitleStyle,e.titleStyle);return t},prepareRowStyle:function(e){var t=e.rowStyle;"function"==typeof t&&(t=null);var t=u({},e.defaultRowStyle,t,{height:e.rowHeight});return t},prepareListWrapStyle:function(e){var t={};return u(t,e.defaultListStyle,{border:e.listBorder,width:e.listWidth||e.listSize,height:e.listHeight||e.listSize,maxHeight:e.listMaxHeight,maxWidth:e.listMaxWidth},e.listStyle),t},renderTitle:function(e){return e.title?(e.titleFactory||l)({style:e.titleStyle,className:(e.titleClassName||"")+" z-title",onClick:this.handleTitleClick.bind(this,e)},e.title,this.renderTitleSort(e)):void 0},renderTitleSort:function(e){return e.sortable!==!1?a.createElement("span",{className:"z-icon-sort-info"}):void 0},renderBody:function(e,t){var r=e.bodyClassName||"";return r+=" z-body",a.createElement("div",{className:r,style:e.bodyStyle},this.renderListWrap(e,t),a.createElement(i,{visible:e.loading}))},renderListWrap:function(e,t){return a.createElement("div",{ref:"listWrap",className:"z-list-wrap",style:e.listWrapStyle},a.createElement("div",{className:"z-scroller"},this.renderList(e,t)))},getCount:function(e){return e.data?e.data.length:0},handleTitleClick:function(e){e.sortable&&(e.toggleSort||this.toggleSort)(e)},toggleSort:function(e){var t,r="asc"===e.sortDirection?1:"desc"===e.sortDirection?-1:e.sortDirection;t=1!=r&&-1!=r?1:1===r?-1:-1===r?0:1,(e.onSortChange||o)(t,e)},renderList:function(e,t){var r="z-list",o=this.getCount(e),s=!1;o||(s=!0,r+=" z-empty");var i=e.data||[];return a.createElement("ul",{className:r,style:e.listTagStyle},s?this.renderEmpty(e):i.map(this.renderRow.bind(this,e,t)))},renderEmpty:function(e){return a.createElement("li",{className:"z-row-empty"},e.loading?e.loadingText:e.emptyText)},renderRow:function(e,t,r,o,s){var a=r[e.idProperty],i=r[e.displayProperty];"function"==typeof e.renderText&&(i=e.renderText(i,r,o,e));var n="";e.selected&&e.selected[a]&&(n+=" z-selected"),t.mouseOverKey===a&&(n+=" z-over");var l=e.rowStyle,c={key:a,style:l,"data-row-id":a,index:o,first:0===o,last:o===s.length-1,item:r,className:n,onClick:this.handleRowClick.bind(this,r,o,e),children:i};"function"==typeof this.props.rowStyle&&u(c.rowStyle,this.props.rowStyle),this.bindRowMethods(e,c,e.rowBoundMethods,r,o),c.className=this.prepareRowClassName(c,this.state),e.rowFactory&&(c.onMouseOver=this.handleRowMouseOver.bind(this,r,o,e,a),c.onMouseOut=this.handleRowMouseOut.bind(this,r,o,e,a));var p=d,y=e.rowFactory||p,f=y(c);return void 0===f&&(f=p(c)),f},handleRowMouseOver:function(e,t,r,o){this.setState({mouseOverKey:o})},handleRowMouseOut:function(){this.setState({mouseOverKey:void 0})},bindRowMethods:function(e,t,r,o,s){Object.keys(r).forEach(function(a){var i=r[a];e[a]&&(t[i]=e[a].bind(null,o,s,e))},this)},prepareRowClassName:function(e){var t=e.index,r=(e.className||"")+" z-row";return r+=t%2?" z-odd":" z-even",e.first&&(r+=" z-first"),e.last&&(r+=" z-last"),r},handleRowClick:function(e,t,r,s){if(r.selectRowOnClick){var a=e[r.idProperty],i=r.selected||{},n=!!i[a],l=n?"onDeselect":"onSelect";(r[l]||o)(a,e,t,i,r),(r.onSelectionChange||o)(a,e,t,i,r)}(r.onRowClick||o)(e,t,r,s)}})},function(e){"use strict";function t(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=Object.assign||function(e){for(var r,o,s=t(e),a=1;a<arguments.length;a++){r=arguments[a],o=Object.keys(Object(r));for(var i=0;i<o.length;i++)s[o[i]]=r[o[i]]}return s}},function(t){t.exports=e},function(e,t,r){"use strict";var o=r(2),s=r(1);e.exports=o.createClass({displayName:"Loader",getDefaultProps:function(){return{defaultStyle:{margin:"auto",position:"absolute",top:0,left:0,bottom:0,right:0},defaultClassName:"loader",size:40}},render:function(){var e=s({},this.props);return this.prepareStyle(e),e.className=e.className||"",e.className+=" "+e.defaultClassName,o.DOM.div(e,o.createElement("div",{className:"loadbar loadbar-1"}),o.createElement("div",{className:"loadbar loadbar-2"}),o.createElement("div",{className:"loadbar loadbar-3"}),o.createElement("div",{className:"loadbar loadbar-4"}),o.createElement("div",{className:"loadbar loadbar-5"}),o.createElement("div",{className:"loadbar loadbar-6"}),o.createElement("div",{className:"loadbar loadbar-7"}),o.createElement("div",{className:"loadbar loadbar-8"}),o.createElement("div",{className:"loadbar loadbar-9"}),o.createElement("div",{className:"loadbar loadbar-10"}),o.createElement("div",{className:"loadbar loadbar-11"}),o.createElement("div",{className:"loadbar loadbar-12"}))},prepareStyle:function(e){var t={};s(t,e.defaultStyle),s(t,e.style),t.width=e.size,t.height=e.size,e.style=t}})},function(e,t,r){"use strict";var o=r(2),s=r(1),a=r(3);e.exports=o.createClass({displayName:"LoadMask",getDefaultProps:function(){return{visibleDisplayValue:"block",defaultStyle:{position:"absolute",width:"100%",height:"100%",display:"none",top:0,left:0}}},render:function(){var e=s({},this.props);return this.prepareStyle(e),e.className=e.className||"",e.className+=" loadmask",o.DOM.div(e,o.createElement(a,{size:e.size}))},prepareStyle:function(e){var t={};s(t,e.defaultStyle),s(t,e.style),t.display=e.visible?e.visibleDisplayValue:"none",e.style=t}})},function(e,t,r){"use strict";var o=r(2),s=r(1);e.exports=o.createClass({displayName:"ReactListView.Row",render:function(){var e=this.prepareProps(this.props,this.state);return o.createElement("li",o.__spread({},e))},getInitialState:function(){return{}},prepareProps:function(e,t){var r={};return s(r,e),r.onMouseOver=this.handleMouseOver,r.onMouseOut=this.handleMouseOut,r.className=this.prepareClassName(r,t),r},prepareClassName:function(e,t){var r=(e.index,e.className||"");return(t.mouseOver||e.mouseOver)&&(r+=" z-over"),r},handleMouseOver:function(){this.setState({mouseOver:!0})},handleMouseOut:function(){this.setState({mouseOver:!1})}})},function(e,t,r){"use strict";var o=r(2),s=r(1);e.exports=o.createClass({displayName:"ReactListView.Title",getDefaultProps:function(){return{title:""}},render:function(){var e=this.prepareProps(this.props);return o.createElement("div",o.__spread({},e))},prepareProps:function(e){var t={};return s(t,e),t}})}])});