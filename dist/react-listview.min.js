!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.ReactListView=t(require("React")):e.ReactListView=t(e.React)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}(function(e){for(var t in e)switch(typeof e[t]){case"number":e[t]=e[e[t]];break;case"object":e[t]=function(t){var r=t.slice(1),n=e[t[0]];return function(e,t,i){n.apply(null,[e,t,i].concat(r))}}(e[t])}return e}([function(e,t,r){"use strict";function n(){}function i(e,t,r){t=t||e.parentNode;var n=t.scrollTop,i=t.offsetHeight,o=n+i,s=e.offsetTop,a=s+e.offsetHeight;return n>s||a>o?(e.scrollIntoView(r),!0):!1}var o=r(1),s=r(9),a=r(17),l=o.createFactory(a),c=r(16),u=o.createFactory(c),d=r(2),p=r(7),f=o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string]);e.exports=o.createClass({displayName:"ReactListView",mixins:[r(15)],propTypes:{renderText:o.PropTypes.func,title:f,rowHeight:f,rowStyle:o.PropTypes.oneOf([o.PropTypes.object,o.PropTypes.func]),data:o.PropTypes.array,loading:o.PropTypes.bool,emptyText:o.PropTypes.string,loadingText:o.PropTypes.string,idProperty:o.PropTypes.string,displayProperty:o.PropTypes.string,selected:o.PropTypes.object,sortable:o.PropTypes.bool,sortDirection:f,toggleSort:o.PropTypes.func},scrollToRow:function(e){return e?i.call(this,e,this.refs.listWrap.getDOMNode()):void 0},scrollToRowById:function(e){this.scrollToRow(this.findRowById(e))},scrollToRowByIndex:function(e){this.scrollToRow(this.findRowByIndex(e))},findRowByIndex:function(e){var t=this.props.data[e];if(t){var r=t[this.props.idProperty];return this.findRowById(r)}},findRowById:function(e){return this.isMounted()?this.getDOMNode().querySelector('[data-row-id="'+e+'"]'):void 0},getDefaultProps:function(){return{rowBoundMethods:{onRowMouseDown:"onMouseDown",onRowMouseUp:"onMouseUp",onRowClick:"onClick",onRowMouseOver:"onMouseOver",onRowMouseOut:"onMouseOut"},sortable:!0,selectRowOnClick:!0,idProperty:"id",displayProperty:"text",emptyText:"No records",loadingText:"",rowHeight:null,defaultStyle:{},defaultListStyle:{}}},getInitialState:function(){return{defaultSelected:this.props.defaultSelected}},render:function(){var e=this.state,t=this.prepareProps(this.props),r=this.renderTitle(t,e),n=this.renderBody(t,e);return t.data=null,t.scrollToIndex&&setTimeout(function(){this.scrollToRow(t.scrollToIndex)}.bind(this),0),o.createElement("div",o.__spread({},t),r,n)},prepareProps:function(e){var t=d({},e);return t.style=this.prepareStyle(t),t.titleStyle=this.prepareTitleStyle(t),t.bodyStyle=this.prepareBodyStyle(t),t.listWrapStyle=this.prepareListWrapStyle(t),t.rowStyle=this.prepareRowStyle(t),t.className=this.prepareClassName(t),t},prepareStyle:function(e){var t={};return d(t,e.defaultStyle,e.style),t},prepareClassName:function(e){var t=e.className||"";t+=" z-listview",this.getCount(e)||(t+=" z-empty");var r=e.sortable?" z-sortable":"";return e.sortable&&e.sortDirection&&(r+="asc"===e.sortDirection||1===e.sortDirection?" z-asc":"desc"===e.sortDirection||-1===e.sortDirection?" z-desc":""),t+=r},prepareBodyStyle:function(e){var t=d({},e.defaultBodyStyle,e.bodyStyle);return t},prepareTitleStyle:function(e){var t=d({},e.defaultTitleStyle,e.titleStyle);return t},prepareRowStyle:function(e){var t=e.rowStyle;"function"==typeof t&&(t=null);var t=d({},e.defaultRowStyle,t,{height:e.rowHeight});return t},prepareListWrapStyle:function(e){var t={};return d(t,e.defaultListStyle,{border:e.listBorder,width:e.listWidth||e.listSize,height:e.listHeight||e.listSize,maxHeight:e.listMaxHeight,maxWidth:e.listMaxWidth},e.listStyle),t},renderTitle:function(e){return e.title?(e.titleFactory||l)({style:e.titleStyle,className:(e.titleClassName||"")+" z-title",onClick:this.handleTitleClick.bind(this,e)},e.title,this.renderTitleSort(e)):void 0},renderTitleSort:function(e){return e.sortable!==!1?o.createElement("span",{className:"z-icon-sort-info"}):void 0},renderBody:function(e,t){var r=e.bodyClassName||"";return r+=" z-body",o.createElement("div",{className:r,style:e.bodyStyle},this.renderListWrap(e,t),o.createElement(s,{visible:e.loading}))},renderListWrap:function(e,t){return o.createElement("div",{ref:"listWrap",className:"z-list-wrap",style:e.listWrapStyle},o.createElement("div",{className:"z-scroller"},this.renderList(e,t)))},getCount:function(e){return e.data?e.data.length:0},handleTitleClick:function(e){e.sortable&&(e.toggleSort||this.toggleSort)(e)},toggleSort:function(e){var t,r="asc"===e.sortDirection?1:"desc"===e.sortDirection?-1:e.sortDirection;t=1!=r&&-1!=r?1:1===r?-1:-1===r?0:1,(e.onSortChange||n)(t,e)},renderList:function(e,t){var r="z-list",n=this.getCount(e),i=!1;n||(i=!0,r+=" z-empty");var s=e.data||[],a=p(e,t);return o.createElement("ul",{className:r,style:e.listTagStyle},i?this.renderEmpty(e):s.map(this.renderRow.bind(this,e,t,a)))},renderEmpty:function(e){return o.createElement("li",{className:"z-row-empty"},e.loading?e.loadingText:e.emptyText)},renderRow:function(e,t,r,n,i,o){var s=n[e.idProperty],a=n[e.displayProperty];"function"==typeof e.renderText&&(a=e.renderText(a,n,i,e));var l="",c=!1;"object"==typeof r&&r?c=!!r[s]:null!=r&&(c=s===r),c&&(this.selIndex=i,l+=" z-selected"),t.mouseOverKey===s&&(l+=" z-over");var p=e.rowStyle,f={key:s,style:p,"data-row-id":s,index:i,first:0===i,last:i===o.length-1,data:n,className:l,children:a};f.onClick=this.handleRowClick.bind(this,n,i,f,e),"function"==typeof this.props.rowStyle&&(f.style=d({},f.style,this.props.rowStyle(n,i,f))),this.bindRowMethods(e,f,e.rowBoundMethods,n,i),f.className=this.prepareRowClassName(f,this.state),e.rowFactory&&(f.onMouseOver=this.handleRowMouseOver.bind(this,n,i,e,s),f.onMouseOut=this.handleRowMouseOut.bind(this,n,i,e,s));var h=u,y=e.rowFactory||h,v=y(f);return void 0===v&&(v=h(f)),v},handleRowMouseOver:function(e,t,r,n){this.setState({mouseOverKey:n})},handleRowMouseOut:function(){this.setState({mouseOverKey:void 0})},bindRowMethods:function(e,t,r,n,i){Object.keys(r).forEach(function(o){var s=r[o];e[o]&&(t[s]=e[o].bind(null,n,i,e))},this)},prepareRowClassName:function(e){var t=e.index,r=(e.className||"")+" z-row";return r+=t%2?" z-odd":" z-even",e.first&&(r+=" z-first"),e.last&&(r+=" z-last"),r},handleRowClick:function(e,t,r,i,o){(i.onRowClick||n)(e,t,i,o),this.handleSelection(r,o)}})},function(t){t.exports=e},function(e){"use strict";function t(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=Object.assign||function(e){for(var r,n,i=t(e),o=1;o<arguments.length;o++){r=arguments[o],n=Object.keys(Object(r));for(var s=0;s<n.length;s++)i[n[s]]=r[n[s]]}return i}},function(e){"use strict";e.exports=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}},function(e,t){(function(t){"use strict";var r;t.document&&(r=t.document.createElement("div")),e.exports=r}).call(t,function(){return this}())},function(e,t,r){"use strict";var n,i=r(3),o=["ms","Moz","Webkit","O"],s=r(4);e.exports=function(e){if(n)return n;for(var t,r,a=0,l=o.length;l>a;a++)if(r=o[a],t=r+i(e),"undefined"!=typeof s.style[t])return n=r}},function(e,t,r){"use strict";var n=r(3),i=r(5),o={flex:1,flexFlow:1,userSelect:1,transform:1,transition:1,transformOrigin:1,transformStyle:1,transitionProperty:1,transitionDuration:1,transitionTimingFunction:1,transitionDelay:1,borderImage:1,borderImageSlice:1,boxShadow:1,backgroundClip:1,backfaceVisibility:1,perspective:1,perspectiveOrigin:1,animation:1,animationDuration:1,animationName:1,animationDelay:1,animationDirection:1,animationIterationCount:1,animationTimingFunction:1,animationPlayState:1,animationFillMode:1,appearance:1};e.exports=function(e){if(!o[e])return e;var t=i(e);return t?t+n(e):e}},function(e){"use strict";e.exports=function(e,t){var r=null==e.selected?t.defaultSelected:e.selected;return r}},2,function(e,t,r){"use strict";var n=r(1),i=r(8),o=r(18);e.exports=n.createClass({displayName:"LoadMask",getDefaultProps:function(){return{visibleDisplayValue:"block",defaultStyle:{position:"absolute",width:"100%",height:"100%",display:"none",top:0,left:0}}},render:function(){var e=i({},this.props);return this.prepareStyle(e),e.className=e.className||"",e.className+=" loadmask",n.DOM.div(e,n.createElement(o,{size:e.size}))},prepareStyle:function(e){var t={};i(t,e.defaultStyle),i(t,e.style),t.display=e.visible?e.visibleDisplayValue:"none",e.style=t}})},function(e,t,r){"use strict";var n=(r(3),r(5)),i=r(6),o=r(4),s={};e.exports=function(e,t){var r=e+": "+t;if(s[r])return s[r];var a=n("appearance"),l=i(e),c="-"+a.toLowerCase()+"-"+t;return o.style[l]=c,o.style[l]===c&&(t=c),s[r]=t,t}},function(e){"use strict";e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},function(e,t,r){"use strict";function n(e,t){var r={key:e,value:t};return(c.plugins||[]).forEach(function(n){var i=a(function(r){return n(e,t,r)},r);i&&(r=i)}),r}function i(e,t){var r=n(e,t);return a(function(e){return{key:s(e.key),value:e.value}},r)}var o=r(11),s=r(6),a=r(13),l=r(14),c=function(e){var t,r,n={};for(t in e)if(o(e,t)){if(r=i(t,e[t]),!r)continue;a(function(e){n[e.key]=e.value},r)}return n};e.exports=l(c)},function(e){"use strict";e.exports=function(e,t){return t?Array.isArray(t)?t.map(e).filter(function(e){return!!e}):e(t):void 0}},function(e,t,r){"use strict";var n=r(10);e.exports=function(e){return e.plugins=e.plugins||[function(){var e={flex:1,"inline-flex":1};return function(t,r){return"display"===t&&r in e?{key:t,value:n(t,r)}:void 0}}()],e.plugin=function(t){e.plugins=e.plugins||[],e.plugins.push(t)},e}},function(e,t,r){"use strict";var n=r(2),i=r(7),o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};e.exports={findInitialSelectionIndex:function(){var e=i(this.props,this.state),t=void 0;if(!Object.keys(e).length)return t;for(var r,n=0,o=this.props.data,s=o.length,a=this.props.idProperty;s>n;n++)r=o[n][a],e[r]&&(t=n);return t},notifySelection:function(e,t){"function"==typeof this.props.onSelectionChange&&this.props.onSelectionChange(e,t),o(this.props,"selected")||this.setState({defaultSelected:e})},handleSingleSelection:function(e,t){var r=this.props,n=this.isRowSelected(e),i=!n;n&&t&&!t.ctrlKey&&(i=!0);var o=i?e[r.idProperty]:null;this.notifySelection(o,e)},handleMultiSelection:function(e,t,r){var o=r.selIndex,s=r.prevShiftKeyIndex,a=this.props,l=null==o?{}:n({},i(a,this.state));if(null!=s&&null!=o){var c=Math.min(s,o),u=Math.max(s,o),d=a.data.slice(c,u+1)||[];d.forEach(function(e){if(e){var t=e[a.idProperty];delete l[t]}})}e.forEach(function(e){if(e){var t=e[a.idProperty];l[t]=e}}),this.notifySelection(l,e)},handleMultiSelectionRowToggle:function(e){var t=i(this.props,this.state),r=this.isRowSelected(e),o=n({},t),s=e[this.props.idProperty];return r?delete o[s]:o[s]=e,this.notifySelection(o,e),r},handleSelection:function(e,t){var r=this.props;if(o(r,"selected")||o(r,"defaultSelected")){var n=(this.isRowSelected(e.data),this.isMultiSelect());if(!n)return void this.handleSingleSelection(e.data,t);void 0===this.selIndex&&(this.selIndex=this.findInitialSelectionIndex());var i,s,a,l=this.selIndex,c=e.index,u=this.shiftKeyIndex;if(t.ctrlKey){this.selIndex=c,this.shiftKeyIndex=null;var d=this.handleMultiSelectionRowToggle(r.data[c],t);return void(d&&(this.selIndex++,this.shiftKeyIndex=u))}t.shiftKey?this.shiftKeyIndex=c:(this.selIndex=c,this.shiftKeyIndex=null,l=null),null==l?a=[r.data[c]]:(i=Math.min(c,l),s=Math.max(c,l)+1,a=r.data.slice(i,s)),this.handleMultiSelection(a,t,{selIndex:l,prevShiftKeyIndex:u})}},isRowSelected:function(e){var t=this.getSelectedMap(),r=e[this.props.idProperty];return t[r]},isMultiSelect:function(){var e=i(this.props,this.state);return e&&"object"==typeof e},getSelectedMap:function(){var e,t=i(this.props,this.state),r=t&&"object"==typeof t;return r?e=t:(e={},e[t]=!0),e}}},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(12);e.exports=n.createClass({displayName:"ReactListView.Row",getDefaultProps:function(){return{defaultStyle:{userSelect:"none"}}},render:function(){var e=this.prepareProps(this.props,this.state);return n.createElement("li",n.__spread({},e,{data:null}))},getInitialState:function(){return{}},prepareProps:function(e,t){var r={};return i(r,e),r.style=this.prepareStyle(r),r.onMouseOver=this.handleMouseOver,r.onMouseOut=this.handleMouseOut,r.className=this.prepareClassName(r,t),r},prepareStyle:function(e){var t=i({},e.defaultStyle,e.style);return o(t)},prepareClassName:function(e,t){var r=(e.index,e.className||"");return(t.mouseOver||e.mouseOver)&&(r+=" z-over"),r},handleMouseOver:function(){this.setState({mouseOver:!0})},handleMouseOut:function(){this.setState({mouseOver:!1})}})},function(e,t,r){"use strict";var n=r(1),i=r(2);e.exports=n.createClass({displayName:"ReactListView.Title",getDefaultProps:function(){return{title:""}},render:function(){var e=this.prepareProps(this.props);return n.createElement("div",n.__spread({},e))},prepareProps:function(e){var t={};return i(t,e),t}})},function(e,t,r){"use strict";var n=r(1),i=r(8);e.exports=n.createClass({displayName:"Loader",getDefaultProps:function(){return{defaultStyle:{margin:"auto",position:"absolute",top:0,left:0,bottom:0,right:0},defaultClassName:"loader",size:40}},render:function(){var e=i({},this.props);return this.prepareStyle(e),e.className=e.className||"",e.className+=" "+e.defaultClassName,n.DOM.div(e,n.createElement("div",{className:"loadbar loadbar-1"}),n.createElement("div",{className:"loadbar loadbar-2"}),n.createElement("div",{className:"loadbar loadbar-3"}),n.createElement("div",{className:"loadbar loadbar-4"}),n.createElement("div",{className:"loadbar loadbar-5"}),n.createElement("div",{className:"loadbar loadbar-6"}),n.createElement("div",{className:"loadbar loadbar-7"}),n.createElement("div",{className:"loadbar loadbar-8"}),n.createElement("div",{className:"loadbar loadbar-9"}),n.createElement("div",{className:"loadbar loadbar-10"}),n.createElement("div",{className:"loadbar loadbar-11"}),n.createElement("div",{className:"loadbar loadbar-12"}))},prepareStyle:function(e){var t={};i(t,e.defaultStyle),i(t,e.style),t.width=e.size,t.height=e.size,e.style=t}})}]))});