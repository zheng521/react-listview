!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.ReactListView=t(require("React")):e.ReactListView=t(e.React)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}(function(e){for(var t in e)switch(typeof e[t]){case"number":e[t]=e[e[t]];break;case"object":e[t]=function(t){var r=t.slice(1),n=e[t[0]];return function(e,t,o){n.apply(null,[e,t,o].concat(r))}}(e[t])}return e}([function(e,t,r){"use strict";function n(){}function o(e,t,r){t=t||e.parentNode;var n=t.scrollTop,o=t.offsetHeight,i=n+o,s=e.offsetTop,a=s+e.offsetHeight;return n>s||a>i?(e.scrollIntoView(r),!0):!1}var i=r(1),s=r(10),a=r(24),l=i.createFactory(a),u=r(23),c=i.createFactory(u),d=r(18),p=r(2),f=r(6),h=r(8),y=i.PropTypes,v=y.oneOfType([y.number,y.string]),m="ReactListView";e.exports=i.createClass({displayName:m,mixins:[r(22)],propTypes:{renderText:y.func,title:v,rowHeight:v,rowStyle:y.oneOfType([y.object,y.func]),data:y.array,loading:y.bool,emptyText:y.string,loadingText:y.string,idProperty:y.string,displayProperty:y.string,selected:y.oneOfType([y.object,y.string,y.number]),sortable:y.bool,sortDirection:v,toggleSort:y.func},scrollToRow:function(e){return e?o.call(this,e,this.refs.listWrap.getDOMNode()):void 0},scrollToRowById:function(e){this.scrollToRow(this.findRowById(e))},scrollToRowByIndex:function(e){this.scrollToRow(this.findRowByIndex(e))},findRowByIndex:function(e){var t=this.data[e];if(t){var r=t[this.props.idProperty];return this.findRowById(r)}},findRowById:function(e){return this.isMounted()?this.getDOMNode().querySelector('[data-row-id="'+e+'"]'):void 0},getDefaultProps:function(){return{"data-display-name":m,rowBoundMethods:{onRowMouseDown:"onMouseDown",onRowMouseUp:"onMouseUp",onRowClick:"onClick",onRowMouseEnter:"onMouseEnter",onRowMouseLeave:"onMouseLeave",onRowMouseOver:"onMouseOver",onRowMouseOut:"onMouseOut"},emptyTextStyle:{fontStyle:"italic"},sortable:!0,selectRowOnClick:!0,idProperty:"id",displayProperty:"text",emptyText:"No records",loadingText:"",rowHeight:null,defaultStyle:{display:"flex",flexFlow:"column",color:"rgb(120, 120, 120)"},defaultTitleStyle:{userSelect:"none",fontWeight:"bold",padding:5,background:"linear-gradient(to bottom, #f7f7f7 0%,#efefef 13%,#e6e6e6 100%)",borderBottom:"1px solid #A8A8A8",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},defaultListStyle:{},defaultRowStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",listStyleType:"none",padding:5,cursor:"default"},rowBorder:"1px dotted #A8A8A8",defaultSelectedRowStyle:{background:"rgb(103, 175, 233)",color:"white"},defaultOverRowStyle:{background:"rgb(118, 181, 231)",color:"white"},defaultOverSelectedRowStyle:{color:"white",background:"rgb(90, 152, 202)"},defaultSortArrowStyle:{color:"rgb(103, 175, 233)",margin:5},defaultLastRowStyle:{borderBottom:0}}},componentWillReceiveProps:function(){this.checkData(this.props)},componentWillMount:function(){this.checkData(this.props)},checkData:function(e){var t=e.data,r=e.sortable&&t&&Array.isArray(t);this.setState(r&&null!=this.state.defaultSortDirection?{data:this.sort(t)}:{data:null})},sort:function(e,t){if(void 0===t&&(t=this.prepareSortDirection(this.props)),this.props.sortData)return this.props.sortData(e,t);var r={name:this.props.displayProperty,dir:t};return this.props.sortType&&(r.type=this.props.sortType),this.props.sortFn&&(r.fn=props.sortFn),d(r,[].concat(e))},getInitialState:function(){return{defaultSelected:this.props.defaultSelected,defaultSortDirection:this.props.defaultSortDirection}},render:function(){var e=this.state,t=this.prepareProps(this.props),r=this.renderTitle(t,e),n=this.renderBody(t,e);return t.scrollToIndex&&setTimeout(function(){this.scrollToRow(t.scrollToIndex)}.bind(this),0),i.createElement("div",i.__spread({},t,{data:null}),r,n)},prepareProps:function(e){var t=p({},e);return t.sortDirection=this.prepareSortDirection(t),this.data=t.data=this.prepareData(t),t.count=this.data.length,t.style=this.prepareStyle(t),t.titleStyle=this.prepareTitleStyle(t),t.bodyStyle=this.prepareBodyStyle(t),t.listWrapStyle=this.prepareListWrapStyle(t),t.rowStyle=this.prepareRowStyle(t),t.sortArrowStyle=this.prepareSortArrowStyle(t),t.className=this.prepareClassName(t),t},prepareSortDirection:function(e){var t=e.sortDirection;null==t&&(t=this.state.defaultSortDirection);var r="asc"===t?1:"desc"===t?-1:t;return r},prepareData:function(e){var t=this.state.data||e.data;return t&&Array.isArray(t)||(t=[]),t},prepareSortArrowStyle:function(e){var t=p({},e.defaultSortArrowStyle,e.sortArrowStyle);return t},prepareStyle:function(e){var t,r={};return e.count||(t=e.emptyStyle),p(r,e.defaultStyle,e.style,t),f(r)},prepareClassName:function(e){var t=e.className||"";t+=" z-listview",e.count||(t+=" z-empty");var r=e.sortable?" z-sortable":"";return e.sortable&&e.sortDirection&&(r+=1===e.sortDirection?" z-asc":-1===e.sortDirection?" z-desc":""),t+=r},prepareBodyStyle:function(e){var t=p({},e.defaultBodyStyle,e.bodyStyle);return f(t)},prepareTitleStyle:function(e){var t=p({},e.defaultTitleStyle);e.sortable&&(t.cursor="pointer");var r=p({},t,e.titleStyle);return f(r)},prepareRowStyle:function(e){var t=e.rowStyle;"function"==typeof t&&(t=null);var r;e.rowBorder&&(r={borderBottom:e.rowBorder,borderRight:e.rowBorder});var t=p({},e.defaultRowStyle,r,t,{height:e.rowHeight});return f(t)},prepareListWrapStyle:function(e){var t={};return p(t,e.defaultListStyle,{border:e.listBorder,width:e.listWidth||e.listSize,height:e.listHeight||e.listSize,maxHeight:e.listMaxHeight,maxWidth:e.listMaxWidth},e.listStyle),f(t)},renderTitle:function(e){return e.title?(e.titleFactory||l)({style:e.titleStyle,className:(e.titleClassName||"")+" z-title",onClick:this.handleTitleClick.bind(this,e)},e.title,this.renderTitleSort(e)):void 0},renderTitleSort:function(e){if(e.sortable!==!1){var t=1==e.sortDirection?"▲":-1==e.sortDirection?"▼":null;return i.createElement("span",{style:e.sortArrowStyle,className:"z-icon-sort-info"},t)}},renderBody:function(e,t){var r=e.bodyClassName||"";return r+=" z-body",i.createElement("div",{className:r,style:e.bodyStyle},this.renderListWrap(e,t),i.createElement(s,{visible:e.loading}))},renderListWrap:function(e,t){return i.createElement("div",{ref:"listWrap",className:"z-list-wrap",style:e.listWrapStyle},i.createElement("div",{className:"z-scroller"},this.renderList(e,t)))},handleTitleClick:function(e){e.sortable&&(e.toggleSort||this.toggleSort)(e)},toggleSort:function(e){var t=e.sortDirection,r=1!=t&&-1!=t?1:1===t?-1:-1===t?0:1,o=function(){(e.onSortChange||n)(r,e)};null==this.props.sortDirection?this.setState({defaultSortDirection:r,data:this.sort(e.data,r)},o):o()},renderList:function(e,t){var r="z-list",n=e.count,o=!1;n||(o=!0,r+=" z-empty");var s=e.data||[],a=h(e,t),l=e.listTagStyle;return n||(l=p({},l,{textAlign:"center"})),i.createElement("ul",{className:r,style:l},o?this.renderEmpty(e):s.map(this.renderRow.bind(this,e,t,a)))},renderEmpty:function(e){return i.createElement("li",{className:"z-row-empty",style:e.emptyTextStyle},e.loading?e.loadingText:e.emptyText)},renderRow:function(e,t,r,n,o,i){var s=n[e.idProperty],a=n[e.displayProperty],l="",u=!1;"object"==typeof r&&r?u=!!r[s]:null!=r&&(u=s===r),u&&(this.selIndex=o,l+=" z-selected");var d=t.mouseOverKey===o;d&&(l+=" z-over");var f=e.rowStyle;u&&(f=p({},f,e.defaultSelectedRowStyle,e.selectedRowStyle)),d&&(f=p({},f,e.defaultOverRowStyle,e.overRowStyle)),u&&d&&p(f,e.defaultOverSelectedRowStyle,e.overSelectedRowStyle);var h=0===o,y=o===i.length-1;y&&(f=p({},f,e.defaultLastRowStyle,e.lastRowStyle));var v={key:s,style:f,"data-row-id":s,index:o,first:h,last:y,data:n,className:l,mouseOver:d};"function"==typeof e.renderText&&(a=e.renderText(a,n,o,v,e)),v.children=a,v.onClick=this.handleRowClick.bind(this,n,o,v,e),"function"==typeof this.props.rowStyle&&(v.style=p({},v.style,this.props.rowStyle(n,o,v))),this.bindRowMethods(e,v,e.rowBoundMethods,n,o),v.className=this.prepareRowClassName(v,this.state),v.onMouseEnter=this.handleRowMouseOver.bind(this,n,o,e,s,v,v.onMouseOver),v.onMouseLeave=this.handleRowMouseOut.bind(this,n,o,e,s,v,v.onMouseOut);var m=c,S=e.rowFactory||m,w=S(v);return void 0===w&&(w=m(v)),w},handleRowMouseOver:function(e,t,r,o,i,s){this.setState({mouseOverKey:t}),(s||n)(e,t,i)},handleRowMouseOut:function(e,t,r,o,i,s){this.setState({mouseOverKey:void 0}),(s||n)(e,t,i)},bindRowMethods:function(e,t,r,n,o){Object.keys(r).forEach(function(i){var s=r[i];e[i]&&(t[s]=e[i].bind(null,n,o,e))},this)},prepareRowClassName:function(e){var t=e.index,r=(e.className||"")+" z-row";return r+=t%2?" z-odd":" z-even",e.first&&(r+=" z-first"),e.last&&(r+=" z-last"),r},handleRowClick:function(e,t,r,o,i){(o.onRowClick||n)(e,t,o,i),this.handleSelection(r,i)}})},function(t){t.exports=e},function(e){"use strict";function t(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=Object.assign||function(e){for(var r,n,o=t(e),i=1;i<arguments.length;i++){r=arguments[i],n=Object.keys(Object(r));for(var s=0;s<n.length;s++)o[n[s]]=r[n[s]]}return o}},function(e,t){(function(t){"use strict";var r;t.document&&(r=t.document.createElement("div")),e.exports=r}).call(t,function(){return this}())},function(e,t,r){"use strict";var n,o=r(5),i=["ms","Moz","Webkit","O"],s=r(3);e.exports=function(e){if(n)return n;for(var t,r,a=0,l=i.length;l>a;a++)if(r=i[a],t=r+o(e),"undefined"!=typeof s.style[t])return n=r}},function(e){"use strict";e.exports=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}},function(e,t,r){"use strict";function n(e,t){var r={key:e,value:t};return(u.plugins||[]).forEach(function(n){var o=a(function(r){return n(e,t,r)},r);o&&(r=o)}),r}function o(e,t){var r=n(e,t);return a(function(e){return{key:s(e.key,e.value),value:e.value}},r)}var i=r(15),s=r(13),a=r(16),l=r(17),u=function(e){var t,r,n={};for(t in e)if(i(e,t)){if(r=o(t,e[t]),!r)continue;a(function(e){n[e.key]=e.value},r)}return n};e.exports=l(u)},function(e){"use strict";e.exports={alignItems:1,justifyContent:1,flex:1,flexFlow:1,userSelect:1,transform:1,transition:1,transformOrigin:1,transformStyle:1,transitionProperty:1,transitionDuration:1,transitionTimingFunction:1,transitionDelay:1,borderImage:1,borderImageSlice:1,boxShadow:1,backgroundClip:1,backfaceVisibility:1,perspective:1,perspectiveOrigin:1,animation:1,animationDuration:1,animationName:1,animationDelay:1,animationDirection:1,animationIterationCount:1,animationTimingFunction:1,animationPlayState:1,animationFillMode:1,appearance:1}},function(e){"use strict";e.exports=function(e,t){var r=null==e.selected?t.defaultSelected:e.selected;return r}},2,function(e,t,r){"use strict";var n=r(1),o=r(9),i=r(25);e.exports=n.createClass({displayName:"LoadMask",getDefaultProps:function(){return{visibleDisplayValue:"block",defaultStyle:{position:"absolute",width:"100%",height:"100%",display:"none",top:0,left:0}}},render:function(){var e=o({},this.props);return this.prepareStyle(e),e.className=e.className||"",e.className+=" loadmask",n.DOM.div(e,n.createElement(i,{size:e.size}))},prepareStyle:function(e){var t={};o(t,e.defaultStyle),o(t,e.style),t.display=e.visible?e.visibleDisplayValue:"none",e.style=t}})},function(e,t,r){"use strict";var n=r(5),o=r(4),i=r(7);e.exports=function(e){if(!i[e])return e;var t=o(e);return t?t+n(e):e}},function(e,t,r){"use strict";var n=r(4),o=r(11),i=r(3),s={},a=i.style;e.exports=function(e,t){var r=e+": "+t;if(s[r])return s[r];var l,u,c;return e in a||(l=n("appearance"),l&&(u=o(e,t),c="-"+l.toLowerCase()+"-"+t,u in a&&(i.style[u]="",i.style[u]=c,""!==i.style[u]&&(t=c)))),s[r]=t,t}},function(e,t,r){"use strict";var n=r(14),o=r(7);e.exports=function(e,t){return o[e]?n(e,t):e}},function(e,t,r){"use strict";var n=r(5),o=r(4),i=r(3),s={},a=i.style;e.exports=function(e){var t=e;if(s[t])return s[t];var r,i;return e in a||(r=o("appearance"),r&&(i=r+n(e),i in a&&(e=i))),s[t]=e,e}},function(e){"use strict";e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},function(e){"use strict";e.exports=function(e,t){return t?Array.isArray(t)?t.map(e).filter(function(e){return!!e}):e(t):void 0}},function(e,t,r){"use strict";var n=r(12);e.exports=function(e){return e.plugins=e.plugins||[function(){var e={flex:1,"inline-flex":1};return function(t,r){return"display"===t&&r in e?{key:t,value:n(t,r)}:void 0}}()],e.plugin=function(t){e.plugins=e.plugins||[],e.plugins.push(t)},e}},function(e,t,r){e.exports=r(20)},function(e){function t(e,t){function r(n){function o(){var o=arguments.length,i=[].concat(n);return o&&i.push.apply(i,arguments),i.length<t?r(i):e.apply(this,i)}return o}return"number"!=typeof t&&(t=e.length),r([])}e.exports=t},function(e,t,r){"use strict";function n(e){return"function"==typeof e}var o=r(19),i=r(21),s=o(function(e,t){return t.sort(u(e))});s.types=i;var a=function(e){if(e){var t=e.name,r="desc"===e.dir||e.dir<0?-1:"asc"===e.dir||e.dir>0?1:0;if(r){!e.fn&&e.type&&(e.fn=s.types[e.type]),e.fn||(e.fn=s.types.string||i.string);var n=e.fn;return function(e,o){var i=e[t],s=o[t];return r*n(i,s)}}}},l=function(e){return Array.isArray(e)||(e=[e]),e.map(a).filter(n)},u=function(e){var t=l(e);return function(e,r){for(var n,o=0,i=0,s=t.length;s>i;i++)if(n=t[i],n&&(o=n(e,r),0!=o))return o;return o}};s._getSortFunctions=l,s.getFunction=u,e.exports=s},function(e){"use strict";e.exports={string:function(e,t){return e+="",t+="",e.localeCompare(t)},number:function(e,t){return e-t}}},function(e,t,r){"use strict";var n=r(2),o=r(8),i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};e.exports={findInitialSelectionIndex:function(){var e=o(this.props,this.state),t=void 0;if(!Object.keys(e).length)return t;for(var r,n=0,i=this.data,s=i.length,a=this.props.idProperty;s>n;n++)r=i[n][a],e[r]&&(t=n);return t},notifySelection:function(e,t){"function"==typeof this.props.onSelectionChange&&this.props.onSelectionChange(e,t),i(this.props,"selected")||this.setState({defaultSelected:e})},handleSingleSelection:function(e,t){var r=this.props,n=this.isRowSelected(e),o=!n;n&&t&&!t.ctrlKey&&(o=!0);var i=o?e[r.idProperty]:null;this.notifySelection(i,e)},handleMultiSelection:function(e,t,r){var i=r.selIndex,s=r.prevShiftKeyIndex,a=this.props,l=null==i?{}:n({},o(a,this.state));if(null!=s&&null!=i){var u=Math.min(s,i),c=Math.max(s,i),d=this.data.slice(u,c+1)||[];d.forEach(function(e){if(e){var t=e[a.idProperty];delete l[t]}})}e.forEach(function(e){if(e){var t=e[a.idProperty];l[t]=e}}),this.notifySelection(l,e)},handleMultiSelectionRowToggle:function(e){var t=o(this.props,this.state),r=this.isRowSelected(e),i=n({},t),s=e[this.props.idProperty];return r?delete i[s]:i[s]=e,this.notifySelection(i,e),r},handleSelection:function(e,t){var r=this.props;if(i(r,"selected")||i(r,"defaultSelected")){var n=(this.isRowSelected(e.data),this.isMultiSelect());if(!n)return void this.handleSingleSelection(e.data,t);void 0===this.selIndex&&(this.selIndex=this.findInitialSelectionIndex());var o,s,a,l=this.selIndex,u=e.index,c=this.shiftKeyIndex;if(t.ctrlKey){this.selIndex=u,this.shiftKeyIndex=null;var d=this.handleMultiSelectionRowToggle(this.data[u],t);return void(d&&(this.selIndex++,this.shiftKeyIndex=c))}t.shiftKey?this.shiftKeyIndex=u:(this.selIndex=u,this.shiftKeyIndex=null,l=null),null==l?a=[this.data[u]]:(o=Math.min(u,l),s=Math.max(u,l)+1,a=this.data.slice(o,s)),this.handleMultiSelection(a,t,{selIndex:l,prevShiftKeyIndex:c})}},isRowSelected:function(e){var t=this.getSelectedMap(),r=e[this.props.idProperty];return t[r]},isMultiSelect:function(){var e=o(this.props,this.state);return e&&"object"==typeof e},getSelectedMap:function(){var e,t=o(this.props,this.state),r=t&&"object"==typeof t;return r?e=t:(e={},e[t]=!0),e}}},function(e,t,r){"use strict";var n=r(1),o=r(2),i=r(6);e.exports=n.createClass({displayName:"ReactListView.Row",getDefaultProps:function(){return{defaultStyle:{userSelect:"none"}}},render:function(){var e=this.prepareProps(this.props,this.state);return n.createElement("li",n.__spread({},e,{data:null}))},getInitialState:function(){return{}},prepareProps:function(e,t){var r={};return o(r,e),r.style=this.prepareStyle(r),r.onMouseEnter=this.handleMouseOver,r.onMouseLeave=this.handleMouseOut,r.className=this.prepareClassName(r,t),r},prepareStyle:function(e){var t=o({},e.defaultStyle,e.style);return i(t)},prepareClassName:function(e,t){var r=(e.index,e.className||"");return(t.mouseOver||e.mouseOver)&&(r+=" z-over"),r},handleMouseOver:function(e){this.setState({mouseOver:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(this.props,e)},handleMouseOut:function(){this.setState({mouseOver:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(this.props,event)}})},function(e,t,r){"use strict";var n=r(1),o=r(2);e.exports=n.createClass({displayName:"ReactListView.Title",getDefaultProps:function(){return{title:""}},render:function(){var e=this.prepareProps(this.props);return n.createElement("div",n.__spread({},e))},prepareProps:function(e){var t={};return o(t,e),t}})},function(e,t,r){"use strict";var n=r(1),o=r(9);e.exports=n.createClass({displayName:"Loader",getDefaultProps:function(){return{defaultStyle:{margin:"auto",position:"absolute",top:0,left:0,bottom:0,right:0},defaultClassName:"loader",size:40}},render:function(){var e=o({},this.props);return this.prepareStyle(e),e.className=e.className||"",e.className+=" "+e.defaultClassName,n.DOM.div(e,n.createElement("div",{className:"loadbar loadbar-1"}),n.createElement("div",{className:"loadbar loadbar-2"}),n.createElement("div",{className:"loadbar loadbar-3"}),n.createElement("div",{className:"loadbar loadbar-4"}),n.createElement("div",{className:"loadbar loadbar-5"}),n.createElement("div",{className:"loadbar loadbar-6"}),n.createElement("div",{className:"loadbar loadbar-7"}),n.createElement("div",{className:"loadbar loadbar-8"}),n.createElement("div",{className:"loadbar loadbar-9"}),n.createElement("div",{className:"loadbar loadbar-10"}),n.createElement("div",{className:"loadbar loadbar-11"}),n.createElement("div",{className:"loadbar loadbar-12"}))},prepareStyle:function(e){var t={};o(t,e.defaultStyle),o(t,e.style),t.width=e.size,t.height=e.size,e.style=t}})}]))});